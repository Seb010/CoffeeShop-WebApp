<?xml version="1.0" encoding="UTF-8"?>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/XHtml.xhtml to edit this template
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Coffee Shop | Basket</title>
    <h:outputStylesheet name="css/cssLayout.css"/>
</h:head>
<h:body>
    <ui:composition template="User_Template.xhtml">
        <ui:define name="content">
            <div class="container">
                <h1>Your Basket</h1>

                <h:form id="basketForm">
                    <h:panelGroup rendered="#{not empty menuBeans.basket}">

                        <h:dataTable value="#{menuBeans.basket}" var="item" class="styled-basket-table">
                            <h:column>
                                <f:facet name="header">Name</f:facet>
                                #{item.name}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Description</f:facet>
                                #{item.description}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Price</f:facet>
                                £ #{item.price}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Quantity</f:facet>
                                #{item.quantity}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Subtotal</f:facet>
                                £ #{item.price * item.quantity}
                            </h:column>
                            <h:column>
                                <f:facet name="header">Action</f:facet>
                                <h:commandButton value="Remove"
                                                 action="#{menuBeans.removeFromBasket(item.productID)}"
                                                 styleClass="remove-button">
                                    <f:ajax execute="@this" render="basketForm"/>
                                </h:commandButton>
                            </h:column>
                        </h:dataTable>

                        <br/>
                        <div class="total-price-wrapper">
                            <h3 class="total-price">Total: £ #{menuBeans.getTotalCost()}</h3>
                        </div>
                        <br/>

                        <h:commandButton value="Proceed to Checkout"
                                         action="user_checkout.xhtml?faces-redirect=true"
                                         styleClass="checkout-button" />
                        <br/><br/>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{empty menuBeans.basket}">
                        <p>Your basket is currently empty.</p>
                    </h:panelGroup>
                </h:form>
            </div>
        </ui:define>
    </ui:composition>
</h:body>
</html>

